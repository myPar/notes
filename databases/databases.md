### Основные понятия
__Данные__ - совокупность сведений, зафиксированных на определённом носителе информации в форме, пригодной для хранения, передачи и обработки.  

__Информация__ - результат преобразования и анализа данных.  

Таким образом ___данные___ являются фиксированными сведениями, а ___информация___, это результат анализа и обработки этих сведений.  

__Предметная область__ - часть реального мира, для которой создаётся информационная система.  

__База данных__ - [упорядоченный набор структурированной информации или данных](https://www.oracle.com/database/what-is-database/).  

__Система управления базами данных (СУБД)__ - Набор программ, обеспечивающий средства создания и манипулирования базой данных на ЭВМ.  

__Система базы данных__ - ___СУБД___ + данные. Иногда в систему базы данных включают и приложения.  

__Сущность__ - информационный объект, моделирующий объекты приложения.  

__DDL__ - Data definition language. Язык для описания структуры базы данных.  

__DML__ - Data manipulation language. Язык для манипулирования данными (вставка, изменение, удаление)  

__QL__ - Query language. Язык запросов к данным.  

__Транзакция__ - набор операций выполняющийся _атомарно_, т.е. либо выполняется полностью, либо не выполняется вовсе.  

__Целостность базы данных__ - соответствие имеющейся в БД информации её внутренней логике, структуре, и всем явно заданным правилам. Каждое правило, налагающее некоторое ограничение на БД, называется ___ограничением целостности___ ([wiki](https://ru.wikipedia.org/wiki/%D0%A6%D0%B5%D0%BB%D0%BE%D1%81%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85)).

### Предпосылки использование баз данных

Задачей является создать автоматизированную информационную систему. Которая в своей работе подразумевает взаимодействие с некоторым набором данных - его анализ, сохранение и редактирование.  

Для решения данной задачи необходимо:  
* Создание модели предметной области. Т.е. выделение сущностей и их взаимосвязей. Данные о сущностях будут помещаться в информационную систему.

* Создание системы хранения данных (базу данных). Стуруктуру, для которой можно обеспечить хранение и взаимодействие с данными.

* Обеспечение доступа к данным. Требуется реализовать язык взаимодействия с данными в системе хранения. Язык должен обеспечивать:
    * Помещение данных в систему хранения.
    * Извлечение данных из системы хранения.
    * редактирование и удаление данных.

### Этапы разработки базы данных

##### Проектирование
* Логическое (семантическое) проектирование
    * выделение сущностей предметной области и описание информации, подлежащей моделированию.
    * разработка семантической модели предметной области без привязки к СУБД. Иными словами проектировнаие семантических связей между сущностями.
    * преобразование семантической модели в модель данных конкретной СУБД. Зачастую в реляционную модель.
* Физическое проектирование - процесс определения организации хранения данных и характеристик доступа к данным (по времени, по расходу памяти и т.д.) для обеспечения целостности, безопасности и производительности БД.
    * определение организации хранения данных
    * определение меры целостности и безопасности
    * определение производительности

##### Планирование
* Планирование аппаратных средств
* Планирование програмных средств

##### Реализация

##### Сопровождение

##### Реинжиниринг

### Семантическое моделирование

__Модель Сущность-Связь (ER-model)__ - включает в себя выделение ___сущностей___, их ___атрибутов___ и ___связей___ между ними.

##### Этапы проектирования __ER-модели__:
* Выделение сущностей
    * определение их атрибутов (свойств сущностей)
    * выделение идентифицирующих атрибутов (ключей)
* Определение связей
    * их типов (one-one, one-many, many-many)
    * их обязательности
* Отображение модели в виде __ER-диаграммы__.

* Объединение представлений пользователей (моделирование локальных представлений)
    * _локальное представление_ соответствует отдельному приложению, пользователю или задаче. Для создания полной картины представления модели эти локальные представления требуется объединить. Происходит это посредством применения операций __агрегации__, __идентичности__ и __обобщения__ к локальным представлениям.

###### связанные определения:
* __Идентичность__ - две сущности идентичны, если имеют одинаковое семантическое значение.
* __Агрегация__ - декартово произведение сущностей. Проще говоря, объединение нескольких сущностей в одну.
* __Обобщение__ - обобщение нескольких мн-в сущностей в одно. (Хонда, Тойота - автомобили)

##### Типы связей
* __many-one__ - если каждый член мн-ва __A__ посредством связи __R__ может быть соединён не более, чем с одним членом мн-ва __B__ , тогда __R__ - это связь типа many-one.
    _пример_: сотрудник может работь в единственном отделе (связь many-one)
* __one-one__ - если связь __R__ является __many-one__ в обоих направлениях, то тогда это связь типа __one-one__.
    _пример_: страна и президент; сетевое устройство и его mac-адрес

* __many-many__ - если связь __R__ ни в одном из направлений не относится к типу __many-one__, то это связь __many-many__

##### Нотации ER-диаграмм
* Нотация Чена - мн-ва сущностей обозначаются прямоугольниками, отношений - ромбами. Если сущность участвует в отношении, они связаны линией. Если отношение не является обязательным, то линия пунктирная. Атрибуты обозначаются овалами и связываются линией с одним отношением или с одной сущностью.

* "Вороньи лапки" - мн-ва сущностей обозначается прямоугольниками; отношение обозначается линией, его степень указывается наличием/отсутствием вилки на конце, необязательность связи указывается кружком на конце; атрибуты сущностей записываются внутри прямоугольников.

### Архитектура системы баз данных

СУБД должна обеспечивать следующие функции:
* Позволять пользователям создавать новые базы данных и определять их схемы с помощью __DDL (Data definition language)__.
* Позволять пользователям писать запросы к базе данных на ___языке запросов (Query language)___ или на __языке управления данными (Data management language)__.
* Позволять хранить большие объёмы данных на протяжении длительного времени.
* Предотвращать опасность несанкционированного доступа к данным.
* Обеспечивать эффективность операций просмотра и изменения данных.
* Обеспечение корректного параллельного взаимодействия с базой данных. Исключение влияния действий одного пользователя на действия другого.

Таким образом, можно выделить следующие ___типовые функции___ СУБД:
* Определение типов данных, структур данных, ограничений по значениям.
* Создание или загрузка начального содержимого базы данных.
* Манипулирование базой данных
    * Извлечение данных - поиск данных по запросам.
    * Модификация данных - втавка, удаление, обновление содержимого БД

* Управление многопользовательским доступом
* Управление внешней памятью
* Управление целостностью данных (физической и семантической)
* Управление защитой от несанкционированного доступа к базе данных

### Структура СУБД

![структура СУБД](https://i.ibb.co/vhdLPmt/DMSscema.jpg)

##### Компилятор запросов
Трансляция запроса во внутреннее представлние - план запроса. Компоненты:
* лексический анализатор - преобразование запроса в древовидную структуру.
* препроцессор запросов - семантический анализ древовидного представления, преобразование древовидного представления в дерево алгебраический операций.
* оптимизатор запросов - преобразование запроса в наиболее эффективную пос-ть фактических операций над данными.

##### Исполняющая машина
Выполнение операций запроса (интерпретатор).

##### Менджер буферов

Разбиение оперативной памяти на буферы - участки-страницы, куда помещается содержимое дисковых блоков.

* _Примечание:_ все компоненты СУБД обращаются к данным через буфера, менеджер буферов или через исполняющую машину.

* _Примечание:_ категории данных:
    * Фактические данные - содержимое БД.
    * Метаданные - описание семантической структуры БД (схема базы данных).
    * Статистика - информация о свойствах данных (размер отношения, сведения о значениях в колонках и т.д.)
    * Индексы - структуры, повышающие скорость доступа к данным.

##### Менеджер транзакций
Реализация выполнения __транзакций__. Транзакции должны выполняться _атомарно_, _изолированно_ друг от друга, сохраняя _целостность_ БД, обладать св-м _устойчивости_; т.е. с соблюдением принципов [ACID](https://ru.wikipedia.org/wiki/ACID). 

Менеджер транзакций имеет вложенные компоненты - __планировщик__ и __менеджер протоколирования__. Менеджер транзакций также решает проблему взаимных блокировок.
* _Примечание:_ транзакциями являются команды DML, поскольку только они модифицируют данные в БД. Команды QL только получают данные из БД.
##### Менеджер протоколирования
Для обеспечения ___надёжности___ (Durability) транзакций каждое изменение в БД фиксируется в специальном системном журнале (файлах) в виде так называемого _протокола изменений_.  

Информация _протокола_ с начала сохраняется в буферах, затем менеджер протоколирования, взаимодействую с менеджером буферов переодически сбрасывает данные на диск. Таким образом, имеется возможность восстановить необходимое состояние БД в случае сбоев.

##### Менеджер восстановления

Считывает протоколы изменений и, в случае необходимости, приводит БД в некоторое целостное состояние.

##### Планировщик заданий

Транзакции обязаны выполняться в строгой изоляции друг от друга. Поскольку в системе может исполняться несколько процессов транзакций одновременно, то требуется обеспечить корректный конкурентный доступ к разделяемым ресурсам БД.  

Планировщик заданий устанавливает блокировки на соответсвующие фрагменты БД, которые препятствуют одновременному изменению данных несколькими транзакциями. Данные блокировок (примитивов синхронизации) храняться в таблице блокировок.  

Планировщик заданий воздействует на процесс выполнения
запросов и других операций, регулируя доступ виртуальной машины к разделяемым данным.

Также, планировщик заданий решает проблему взаимных блокировок.


