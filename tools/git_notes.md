### Структура git

* __BLOB__ - содержимое файла, без какой либо метаинформации, только байты содержимого. Каждый BLOB идентифицируется __хэшем__ (SHA-1), который конструируется только на основе байт данных файла.

* __TREE__ - информация дирректории. Содержит хэши объектов внутри дирректории (BLOBs + TREEs). Также имеет свой собственный хэш. Каждая запись имеет спецификатор доступа, хэш и имя объекта внутри дирректории, которую отслеживает дерево.  

* __COMMIT__ - "снимок" какого-то TREE. Содержит хэш дерева, метаинформацию (автор коммита, дата коммита и пр.), родительские коммиты (их хэши). Также имеет свой хэш.

Хэши каждого вышеперечисленного объекта зависят от содержимого, т.е. если мы изменим данные какого-то BLOB'а, то хэши изменятся и у него, и у всех родительских элементов.Эти изменения будут отображены в новом коммите, который будет ссылаться на родительский.  

* __BRANCH__ - просто ссылка на __COMMIT__, которая может перемещаться.

Важно понимать что в истории коммитов каждый файл будет иметь свою последовательность снимков, т.е. каждый коммит содержит данные файла на этом шаге (не изменения), если же файл не был изменён, то хранится ссылка на его снимок из родительского коммита, в целях экономии памяти.  

Индексация файла - произведение снимка состояния файла для его последующего добаввления в коммит.  

Файлы, находящиеся под версионым контролем могут находится в тёх состояниях:  

* __modified__ - в файле были проведены изменения, но они не были проиндексированны.  
* __staged__ - изменения в файле были проиндексированны, т.е. они попадут в следующий коммит.  
* __commited__ - текущее состояние файла сохранено в git, в рамках коммита.  

---

### Команды

* __git log__

``` 
### отображение истории комитов в репозитории в обратном хронологическом порядке.
$ git log

### опция -p или --patch показывает разницу, внесённую в каждый коммит, дополнительно 
можно указать кол-во записей (2)
$ git log -p -2

### опция --stat задаёд вывод сокращённой статистики
$ git log --stat

### опция изменения формата вывода --pretty для неё существует несколько встроенных вариантов:
oneline - вывод комитов в одну строку (полезно при просмотре большого кол-ва коммитов)
short, full, fuller - по возрастанию выводимого кол-ва информации

$ git log --pretty=oneline
$ git log --pretty=short
$ git log --pretty=full
$ git log --pretty=fuller

format - позволяет задать формат вывода. Значение данной опции задаётся строкой, в
которой допускаются следующие спецификаторы формата:
%H - Хеш коммита
%h - Сокращенный хеш коммита
%T - Хеш дерева
%t - Сокращенный хеш дерева
%P - Хеш родителей
%p - Сокращенный хеш родителей
%an - Имя автора
%ae - Электронная почта автора
%cn - Имя коммитера
%ce - Электронная почта коммитера
%cd - Дата коммитера
%ad - Дата автора
%s - Содержание

$  git log --pretty=format:"commit %h, %cn, %an : %s"

### вместе с опцией format и oneline очень удобно применить опцию --graph в команде
log, которая позволит вывести текущую ветку в виде дерева вместе с историей слияния
$ git log --pretty=format:"commit %h, %cn, %an : %s" --graph

```

* __git commit__

```
### коммит изменений
$ git commit -m "commit message"

### Изменение сообщения последнего коммита. Откроетса текстовый редактор, где можно будет отредактировать сообщение.

$ git commit --ammend

### Редактирование снимка закоммиченных файлов. Нужно добавить/удалить из индекса нужные вам измененения через git add или git rm, после чего текущий снимок можно сохранить в последний коммит, тем самым отредактирровав его.

$ touch file.txt
$ git add file.txt
$ git commit --ammend
```

* __git checkout__
```
### переход на определённый коммит git checkout + хэш коммита
$ git checkout 403c079561c82709c2688a39f871b13635e3ae18

### восстановление снимков файлов на определённом коммите (с добавлением в индекс, но без коммита загруженного снимка). Восстановить состояние всех файлов:  

$ git checkout 2f5acdfb3ca895dd9183bf7051518f8d041a1e3b .

### восстановить состояние определённого файла
$ git checkout 2f5acdfb3ca895dd9183bf7051518f8d041a1e3b file2.txt
```

* __git rm__
```
### удаление файла из проиндексированных, а также из рабочего каталога
$ git rm file1.txt

### удаление файла из индекса с сохранением в каталоге
$ git rm --cached file1.txt

### удаление папки. Нужно добавить опцию -rf (рекурсивно)
$ git rm -rf folder

### удаление версионного контроля git из проекта (удаляем папку .git)
$ git rm -rf .git
```
